import{a as _}from"./chunk-Q23HZRJ7.js";import{a as O}from"./chunk-ERUKKQQV.js";import{a as P,e as T,f as V}from"./chunk-PFBLKKJ5.js";import{a as C,b as y,i as M}from"./chunk-DD7WX4WS.js";import{M as B,R as G,S as U,T as k,U as D,V as R,X as q,a as L,b as F,d as w,e as I,g as x,h as j,i as E,j as H,k as N,m as A}from"./chunk-A5OF7ZM7.js";import"./chunk-Q64FFBLU.js";import{q as h}from"./chunk-DG624HAC.js";import{Cb as c,Mb as m,Qb as b,Xa as v,Ya as n,Z as f,ca as d,ha as g,k as s,ob as S,wb as a,xb as o,yb as p}from"./chunk-U3KHM5CZ.js";var l=class r{constructor(e){this.httpClient=e}url=V.apiUrl;user_data=new s(null);location_data=new s(null);login(e){return this.httpClient.post(this.url+"/login_routes/login",e,{headers:new C().set("Content-Type","application/json")})}static \u0275fac=function(t){return new(t||r)(d(y))};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var z=class r{constructor(e,t,i,u,K){this.fb=e;this.loginService=t;this.userService=i;this.authService=u;this.router=K}login_form;locations=[];users=[];ngOnInit(){this.login_form=this.fb.group({email:["kyzereye@gmail.com",F.required],password:["1Q!azxsw2"]})}onSubmit(){let e=this.login_form.value,t={email:e.email,password:e.password};this.loginService.login(t).subscribe(i=>{i.success===!0&&(this.userService.setCurrentUser(i.user_data),this.authService.login(),this.router.navigate(["/signup"]))},i=>{console.error("Login error:",i)})}getLocations(){this.userService.getAllLocations().subscribe({next:e=>{this.locations=e,this.userService.setLocations(this.locations)},error:e=>{console.error("Error fetching locations:",e)}})}getAllusers(){this.userService.getAllUsers().subscribe({next:e=>{this.users=e},error:e=>{console.error("Error fetching locations:",e)}})}onLoginHelp(){console.log("onLoginHelp")}static \u0275fac=function(t){return new(t||r)(n(N),n(l),n(O),n(_),n(M))};static \u0275cmp=g({type:r,selectors:[["app-login"]],standalone:!0,features:[b],decls:15,vars:1,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","email","type","email","required",""],["matInput","","formControlName","password","type","password","required",""],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","warn","type","button",3,"click"]],template:function(t,i){t&1&&(a(0,"mat-card")(1,"form",0),c("ngSubmit",function(){return i.onSubmit()}),a(2,"mat-form-field",1)(3,"mat-label"),m(4,"Email"),o(),p(5,"input",2),o(),a(6,"mat-form-field",1)(7,"mat-label"),m(8,"Password"),o(),p(9,"input",3),o(),a(10,"div")(11,"button",4),m(12,"Login"),o(),a(13,"button",5),c("click",function(){return i.onLoginHelp()}),m(14,"Login Help"),o()()()()),t&2&&(v(),S("formGroup",i.login_form))},dependencies:[A,x,L,w,I,H,j,E,h,q,R,U,G,B,D,k,T,P],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:300px;margin:0 auto;padding:25px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:20px}"]})};export{z as LoginComponent};
